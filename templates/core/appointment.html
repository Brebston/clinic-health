{% extends "base.html" %}
{% load static %}

{% block title %}Clinic-Health - Appoinment{% endblock %}

{% block content %}
<main class="main">

  <!-- Page Title -->
  <div class="page-title">
    <div class="heading">
      <div class="container">
        <div class="row d-flex justify-content-center text-center">
          <div class="col-lg-8">
            <h1 class="heading-title">Appointment</h1>
            <p class="mb-0">
              Odio et unde deleniti. Deserunt numquam exercitationem. Officiis quo
              odio sint voluptas consequatur ut a odio voluptatem. Sit dolorum
              debitis veritatis natus dolores. Quasi ratione sint. Sit quaerat
              ipsum dolorem.
            </p>
          </div>
        </div>
      </div>
    </div>
    <nav class="breadcrumbs">
      <div class="container">
        <ol>
          <li><a href="{% url 'core:index' %}">Home</a></li>
          <li class="current">Appointment</li>
        </ol>
      </div>
    </nav>
  </div><!-- End Page Title -->

  <!-- Appointmnet Section -->
  <section id="appointmnet" class="appointmnet section">

    <div class="container" data-aos="fade-up" data-aos-delay="100">

      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="booking-wrapper">
            <div class="booking-header text-center" data-aos="fade-up" data-aos-delay="200">
              <h2>Schedule Your Appointment</h2>
              <p>Book your medical appointment in just a few simple steps. Our experienced healthcare professionals are ready to provide you with the best care possible.</p>
            </div>

            <div class="booking-steps" data-aos="fade-up" data-aos-delay="300">
              <div class="step">
                <div class="step-icon">
                  <i class="bi bi-calendar-check"></i>
                </div>
                <div class="step-content">
                  <h4>Select Service</h4>
                  <p>Choose the medical service you need</p>
                </div>
              </div>
              <div class="step">
                <div class="step-icon">
                  <i class="bi bi-clock"></i>
                </div>
                <div class="step-content">
                  <h4>Pick Date &amp; Time</h4>
                  <p>Select your preferred appointment slot</p>
                </div>
              </div>
              <div class="step">
                <div class="step-icon">
                  <i class="bi bi-person-check"></i>
                </div>
                <div class="step-content">
                  <h4>Confirm Details</h4>
                  <p>Provide your information and confirm</p>
                </div>
              </div>
            </div>

            <div class="appointment-form" data-aos="fade-up" data-aos-delay="400">
              <form action="#" method="post" class="php-email-form">
                {% csrf_token %}
                <div class="row gy-4">
                  {% if user.is_authenticated %}
                  <div class="col-md-6">
                    <input type="text" name="name" class="form-control" placeholder="Full Name" value="{{ request.user.get_full_name }}" readonly>
                  </div>
                  <div class="col-md-6">
                    <input type="email" name="email" class="form-control" placeholder="Email Address" value="{{ request.user.email }}" readonly>
                  </div>
                  <div class="col-md-6">
                    <input type="tel" name="phone" class="form-control" placeholder="Phone Number" value="{{ request.user.phone }}" readonly>
                  </div>
                  {% else %}
                  <div class="col-md-6">
                    <input type="text" name="name" class="form-control" placeholder="Full Name" required="">
                  </div>
                  <div class="col-md-6">
                    <input type="email" name="email" class="form-control" placeholder="Email Address" required="">
                  </div>
                  <div class="col-md-6">
                    <input type="tel" name="phone" class="form-control" placeholder="Phone Number" required="">
                  </div>
                  {% endif %}
                  <div class="col-md-6">
                  <select id="specialtySelect"
                    name="specialty"
                    class="form-select"
                    required
                    data-endpoint="{% url 'doctors:doctors-by-specialty' %}">
                      <option value="">Select Specialty</option>
                      {% for value, label in specialties %}
                        <option value="{{ value }}">{{ label }}</option>
                      {% endfor %}
                    </select>
                  </div>
                  {% if user.is_authenticated %}
                  <div class="col-md-6">
                    <input type="text" name="date" class="form-control" value="{{ request.user.date_of_birth|date:'d.m.Y' }}" readonly>
                  </div>
                  {% else %}
                  <div class="col-md-6">
                    <input type="date" name="date" class="form-control" required>
                  </div>
                  {% endif %}
                  <div class="col-md-6">
                    <select id="doctorSelect" name="doctor" class="form-select" required>
                      <option value="">Select Doctor</option>
                    </select>
                  </div>
                  <div class="col-12">
                    <textarea name="message" class="form-control" rows="4" placeholder="Additional notes or symptoms (optional)"></textarea>
                  </div>
                  <div class="col-12">
                    <div class="loading">Loading</div>
                    <div class="error-message"></div>
                    <div class="sent-message">Your appointment has been scheduled. Thank you!</div>
                    <button type="submit" class="btn-book">Book Appointment Now</button>
                  </div>
                </div>
              </form>
            </div>

            <div class="emergency-info" data-aos="fade-up" data-aos-delay="500">
              <p><i class="bi bi-exclamation-triangle"></i> For medical emergencies, please call <strong>911</strong> or go to the nearest emergency room.</p>
            </div>

          </div>
        </div>
      </div>

    </div>

  </section><!-- /Appointmnet Section -->

</main>
{% endblock %}
{% block extra_js %}
  <script src="{% static 'assets/js/appointment.js' %}"></script>
{% endblock %}